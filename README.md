# angotest

名字随便取的，作用是 解决hust超星（企业微信） 签到  
借鉴了很多前人的代码，github上应该能搜到很多


技术上使用 `react native` 加 ~~`go` （作为发起请求的工具，来自我的另一个仓库）~~

~~---由于框架和`go`的问题，项目不太好编译~~

目前版本已改为网页登录，不再需要 `go` 相关的 `native module`

因为本人没有 mac 所以实际也不能跨端

目前版本，二维码签到需要人代扫，手势签到 和 位置签到 由于超星的缺陷可以直接秒杀（截至2025.5.18），其他的还没测试。

本人的账号最近被风控了，改用华科自己的网页登录。小心使用。

## 使用教程
1. 点击`添加用户`
2. 输入 `用户名` 和 `密码` ，点提交。`CASTGC` 是 https://pass.hust.edu.cn/cas/ 下的一个 cookie，用于为其他的登录提供认证，在登录时会自动获取，也可手动填入（主要是本人账号被风控了）。这个东西过期比较快，所以经常需要登录
3. 点登录，目前还没处理错误，自行区分是密码错误还是网络问题，还是被风控了。
4. 建议在每次签到前都手动检测一次，一次只签到一个人，我还没有测试在并发情况下有没有bug。
```js
export const accountState = {
  plain: 'plain', // 无状态
  logged: 'logged',  // 已经登录
  logFailed: 'logFailed',  // 登录失败
  pending: 'pending',  // 请求中
  checkSuccess: 'checkSuccess',  // 签到成功
  checkFailed: 'checkFailed',  // 签到失败
};
```
5. 
- 二维码签到：直接切换到 `scan` 页面直接扫码
- 其他签到：点击自动，直接签好

其他说明：
- 最左边的勾：是否签到。事实上，只有登录成功了才会签到
- 检测：检测登录状态
- 连接服务器：WIP，事实上可用，需要一个服务器，使用`SSE`每10s以内发 `ping` event，收到（别人上传）二维码内容时不断发送 `qr` event，内容为`{data:string}`，里面存放二维码的链接，因为过于复杂本人懒得搞
- 长按可以删除用户
- logs里可以查看日志，长按可以复制